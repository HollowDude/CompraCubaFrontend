<div class="container mt-4">
  <h2>Publicar Nuevo Producto</h2>
  
  <form [formGroup]="productoForm" (ngSubmit)="publicar()">
    <!-- Campo Nombre -->
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre del Producto</label>
      <input type="text" class="form-control" id="nombre" 
             formControlName="nombre"
             [class.is-invalid]="submitted && formControls['nombre'].invalid">
      @if (submitted && formControls['nombre'].invalid) {
        <div class="invalid-feedback">
          @if (formControls['nombre'].errors?.['required']) {
            <div>El nombre es requerido</div>
          }
          @if (formControls['nombre'].errors?.['minlength']) {
            <div>Mínimo 3 caracteres</div>
          }
        </div>
      }
    </div>

    <!-- Campo Descripción -->
    <div class="mb-3">
      <label for="descripcion" class="form-label">Descripción</label>
      <textarea class="form-control" id="descripcion" rows="3"
                formControlName="descripcion"
                [class.is-invalid]="submitted && formControls['descripcion'].invalid"></textarea>
      @if (submitted && formControls['descripcion'].invalid) {
        <div class="invalid-feedback">
          @if (formControls['descripcion'].errors?.['required']) {
            <div>La descripción es requerida</div>
          }
          @if (formControls['descripcion'].errors?.['minlength']) {
            <div>Mínimo 10 caracteres</div>
          }
        </div>
      }
    </div>

    <!-- Precios por Provincia -->
    <div class="card mb-3">
      <div class="card-header">Precios por Provincia</div>
      <div class="card-body">
        <div class="row">
          @for (provincia of provincias; track provincia) {
            <div class="col-md-4 mb-2">
              <label [for]="'precio-' + provincia" class="form-label">{{provincia}}</label>
              <input type="number" step="0.01" class="form-control" 
                     [id]="'precio-' + provincia"
                     [formControlName]="provincia" 
                     formGroupName="precioPorProvincia">
            </div>
          }
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-between">
      <a routerLink="/dashboard" class="btn btn-secondary">Cancelar</a>
      <button type="submit" class="btn btn-primary">
        Publicar Producto
      </button>
    </div>
  </form>
</div>